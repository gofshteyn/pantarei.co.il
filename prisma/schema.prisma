generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URI")
}

model Language {
  id                  String        @id @db.Char(2)
  code                String?       @db.VarChar(3)
  displayName         String        @db.VarChar(100) @map("display_name")
  displayNameLocales  Json?                          @map("display_name_locales")
  imageUrl            String?       @db.VarChar(255) @map("image_url")
  createdAt           DateTime      @default(now())  @map("created_at")
  updatedAt           DateTime?     @updatedAt       @map("updated_at")

  locales    Locale[] // Связь с локализациями

  @@map("languages")
}

model Locale {
  languageId  String    @db.Char(2)     @map("language_id") @id
  isDefault   Boolean   @default(false) @map("is_default")     
  createdAt   DateTime  @default(now()) @map("created_at")     
  updatedAt   DateTime? @updatedAt      @map("updated_at")

  language    Language @relation(fields: [languageId], references: [id])

  @@map("locales")

  // Добавление уникального ограничения на сочетание languageId и isDefault
  @@unique([languageId, isDefault])  // Это будет гарантировать, что для одного языка можно иметь только одну локализацию по умолчанию
}

model Currency {
  id                  String    @id @db.VarChar(4)   
  displayName         String    @db.VarChar(100)   @map("display_name")  
  displayNameLocales  Json?                       @map("display_name_locales") 
  symbol              String?   @db.Char(1)          
  createdAt           DateTime  @default(now())    @map("created_at")  
  updatedAt           DateTime? @updatedAt         @map("updated_at")  

  @@map("currencies")  // Название таблицы в базе данных
}